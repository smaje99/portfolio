---
import { getCollection } from "astro:content";

import GitHubIcon from "../icons/GitHubIcon.astro";
import LinkedInIcon from "../icons/LinkedInIcon.astro";
import MailIcon from "../icons/MailIcon.astro";
import Badge from "../components/Badge.astro";
import SocialPill from "../components/SocialPill.astro";
import Layout from "../layouts/Layout.astro";
import SectionContainer from "../components/SectionContainer.astro";
import ExperienceContainer from "../components/Experience.astro";

const response = await getCollection("experiences");
const experiences = response
  .map((experience) => experience.data)
  .sort((a, b) => b.startDate.getTime() - a.startDate.getTime());
---

<Layout
  title="Portfolio de Sergio Majé - Desarrollador y Programdor Web con más de un año de experiencia"
  description="Contrata a Sergio Majé para crear tu aplicación web. Desarrollador Web. Simplificando e innovando tus soluciones."
>
  <main>
    <SectionContainer>
      <h1>
        Hey, soy Sergio Majé
        <a
          href="http://linkedin.com/in/smaje"
          target="_blank"
          rel="noopener noreferrer"
        >
          <Badge>Disponible para trabajar</Badge>
        </a>
      </h1>
      <h2>
        <span>+1 año de experiencia.</span>
        <span>Desarrollador Web.</span>
        <span>Desde Colombia.</span>
        <span>Simplificando e innovado tus soluciones.</span>
      </h2>

      <nav>
        <SocialPill href="http://linkedin.com/in/smaje">
          <LinkedInIcon />
          LinkedIn
        </SocialPill>
        <SocialPill href="https://github.com/smaje99">
          <GitHubIcon />
          GitHub
        </SocialPill>
        <SocialPill href="mailto:smajefranco@gmail.com">
          <MailIcon />
          Contáctame
        </SocialPill>
      </nav>
    </SectionContainer>

    <SectionContainer>
      <ExperienceContainer experiences={experiences} />
    </SectionContainer>
  </main>
</Layout>

<style>
  main {
    margin: auto;
    padding: 10rem 1rem 1rem 1rem;
    width: 800px;
    max-width: calc(100% - 2rem);
    color: white;
    font-size: 20px;
    line-height: 1.6;
  }

  h1 {
    display: inline-flex;
    flex-direction: column;
    gap: 1rem;

    padding-bottom: 2.5rem;
    margin: 0;

    font-size: 3rem;
    line-height: 1;
    font-weight: 700;

    color: rgb(255 255 255);

    & > a {
      width: fit-content;
      display: inline-flex;
    }
  }

  h2 {
    font-size: 1.5rem;
    line-height: 2rem;
    text-wrap: wrap;

    & > span {
      &:nth-child(2) {
        color: rgb(254 240 138 / 80%);
        font-weight: 600;
      }

      &:nth-child(3) {
        color: rgb(96 165 250 / 90%);
      }

      &:last-child {
        opacity: 0.8;
      }
    }
  }

  nav {
    max-width: fit-content;

    display: flex;
    column-gap: 1rem;

    margin-top: 2rem;

    & > a {
      & > svg {
        width: 1.5rem;
        height: 1.5rem;
      }

      &:not(:first-child) > svg {
        color: rgb(255 255 255);
      }
    }
  }
</style>
